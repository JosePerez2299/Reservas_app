{% load utils %}
{% load static %}
<!-- Navbar -->
<div class="navbar bg-base-100 shadow-lg">
  <div class="navbar-start">
      <!-- Mobile menu button -->
      <div class="dropdown lg:hidden">
          <div tabindex="0" role="button" class="btn btn-ghost">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h8m-8 6h16"></path>
              </svg>
          </div>
          <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">


             {# Dropdowns por cada modelo con permisos #}
             <li><a href={% url 'dashboard' %} class=''{%if current_section == 'dashboard' %}active{% endif %}><i class="fas fa-tachometer-alt mr-2"></i> Dashboard</a></li>

             {# Dropdowns por cada modelo con permisos #}
             {% for item in dashboard_access %}

             <li><a href={% url item.model.url %} class=''{%if current_section == item.model.url %}active{% endif %}><i class="fas fa-tachometer-alt mr-2"></i> {{ item.model.label|capfirst }}</a></li>
          {% endfor %}

          </ul>
      </div>
        
      <!-- Logo y nombre -->
      <div class="flex items-center">
          <img src="{% static 'src/images/logo.svg' %}" alt="Logo" class="h-8 w-auto mr-2">
          <div class="divider divider-horizontal m-0"></div>
          <span class="font-bold text-primary text-sm"> {{user.grupo|capfirst}}</span>
      </div>
  </div>
  
  <div class="navbar-center hidden lg:flex">
      <ul class="menu menu-horizontal px-1 gap-1">
        <li><a href={% url 'dashboard' %} class="{% if current_section == 'dashboard' %}active{% endif %}"><i class="fas fa-tachometer-alt mr-2"></i> Dashboard</a></li>

                           {# Dropdowns por cada modelo con permisos #}
                           {% for item in dashboard_access %}

                           <li>
                            <a href={% url item.model.url %} class="{% if current_section == item.model.url %}active{% endif %}">
                              {% get_icon item.model.label|lower %}
                            {{ item.model.label|capfirst }}</a></li>
                        {% endfor %}

      </ul>
  </div>
  
  <div class="navbar-end ">

    <div class="flex items-center">
      <!-- Theme toggle -->
       <div class="mr-2 btn btn-ghost btn-circle">
        {% include "includes/switch_theme.html" %}
       </div>
      
      <!-- User dropdown -->
      <div class="dropdown dropdown-end">
          <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
              <div class="w-10 rounded-full">
                  <div class="avatar placeholder">
                      <div class="bg-neutral text-neutral-content rounded-full w-10">
                          <span class="text-xs">{{user.username|slice:'0:2'|upper}}</span>
                      </div>
                  </div>
              </div>
          </div>
          <ul tabindex="0" class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">

            <p class="p-1 text-sm text-center text-base-content/70" >{{ user.username|upper }}</p>
            <hr>
              <li><a><i class="fas fa-user mr-2"></i>Perfil</a></li>

              <form method="post" action="{% url 'logout' %}">
                  {% csrf_token %}
                  <li><button type="submit"><i class="fas fa-sign-out-alt mr-2"></i>Cerrar Sesi√≥n</button></li>
              </form>
          </ul>
      </div>

    </div>
  </div>
</div>