{% load compress %} {% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html lang="en" x-data="themeSwitcher()" 
x-init="init()" 
>

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reservas CANTV</title>
  {% compress css %}
  <link rel="stylesheet" href="{% static 'src/css/output.css' %}" />
  {% endcompress %}
</head>

<body class="flex flex-col min-h-screen">

    {# INCLUIDO: navbar #}
    {% include 'includes/navbar.html' %}
  
    {# CONTENIDO PRINCIPAL #}
    <main class="flex-grow container mx-auto p-6">
      {% block content %}{% endblock %}
    </main>

<script>
  function themeSwitcher() {
    return {
      // usamos booleano para simplificar el binding con el checkbox
      dark: localStorage.getItem('theme') === 'dark',

      init() {
        // al iniciar, aplicamos el tema seg√∫n localStorage o preferencia del sistema
        this.applyTheme(this.dark);
      },

      toggle() {
        // invocado al hacer click sobre el swap
        console.log(this.dark);
        this.dark = !this.dark;
        this.applyTheme(this.dark);
      },

      applyTheme(isDark) {
        // ponemos el atributo data-theme que DaisyUI utiliza
        document.documentElement.setAttribute('data-theme', isDark ? 'dark' : 'light');
        // guardamos la preferencia
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      }
    }
  }
</script>

<!-- Alpine Plugins -->
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
<script defer src="https://cdn.jsdelivr.net/npm/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>
 
<!-- Alpine Core -->
<script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

</body>

</html>